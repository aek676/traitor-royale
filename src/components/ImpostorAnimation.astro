---
import { Image } from "astro:assets";
import { KingBlue, KingRed } from "../assets";

const { class: className } = Astro.props;
---

<div class={`relative ${className}`}>
    <Image
        src={KingBlue}
        alt="King Blue"
        width={384}
        height={384}
        class="block w-full h-auto relative z-0"
    />

    <Image
        src={KingRed}
        alt="King Red"
        width={384}
        height={384}
        class="absolute inset-0 w-full h-full object-contain z-10 opacity-0 animate-random-glitch"
    />
</div>

<style>
    .animate-random-glitch {
        animation: chaotic-switch 8s linear infinite;
        will-change: opacity, filter;
    }

    @keyframes chaotic-switch {
        0%,
        20% {
            opacity: 0;
        }

        20.1% {
            opacity: 1;
            filter: brightness(1.2);
        }
        20.3% {
            opacity: 0;
        }
        20.5% {
            opacity: 1;
            filter: brightness(1);
        }
        21% {
            opacity: 0;
        }

        21.1%,
        45% {
            opacity: 0;
        }

        45.1% {
            opacity: 1;
            filter: brightness(1.8) grayscale(0.5)
                drop-shadow(0 0 20px rgba(255, 255, 255, 0.5));
        }
        48% {
            opacity: 1;
            filter: brightness(1) drop-shadow(0 0 10px rgba(234, 64, 31, 0.3));
        }

        48%,
        75% {
            opacity: 1;
        }

        75.1% {
            opacity: 0;
        }
        75.5% {
            opacity: 1;
            filter: brightness(0.8);
        }
        76% {
            opacity: 0;
        }

        76.1%,
        100% {
            opacity: 0;
        }
    }
</style>
